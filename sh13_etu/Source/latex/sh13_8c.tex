\hypertarget{sh13_8c}{}\section{sh13/sh13.c File Reference}
\label{sh13_8c}\index{sh13/sh13.c@{sh13/sh13.c}}


client permettant de se connecter au serveur  


{\ttfamily \#include $<$S\+D\+L.\+h$>$}\newline
{\ttfamily \#include $<$S\+D\+L\+\_\+image.\+h$>$}\newline
{\ttfamily \#include $<$S\+D\+L\+\_\+ttf.\+h$>$}\newline
{\ttfamily \#include $<$pthread.\+h$>$}\newline
{\ttfamily \#include $<$unistd.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$sys/types.\+h$>$}\newline
{\ttfamily \#include $<$sys/socket.\+h$>$}\newline
{\ttfamily \#include $<$netinet/in.\+h$>$}\newline
{\ttfamily \#include $<$netdb.\+h$>$}\newline
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void $\ast$ \mbox{\hyperlink{sh13_8c_a2e05d0dede42b6aeb364340373554df6}{fn\+\_\+serveur\+\_\+tcp}} (void $\ast$arg)
\begin{DoxyCompactList}\small\item\em Fonction passée en argument aux thread qui l\textquotesingle{}executera. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{sh13_8c_aa6fd4f7eb54362ed558cdaeb5e5bd927}{send\+Message\+To\+Server}} (char $\ast$ip\+Address, int portno, char $\ast$mess)
\item 
\mbox{\Hypertarget{sh13_8c_a3c04138a5bfe5d72780bb7e82a18e627}\label{sh13_8c_a3c04138a5bfe5d72780bb7e82a18e627}} 
int {\bfseries main} (int argc, char $\ast$$\ast$argv)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
pthread\+\_\+t \mbox{\hyperlink{sh13_8c_a1f65882538200c7d69cdfabe03250dde}{thread\+\_\+serveur\+\_\+tcp\+\_\+id}}
\item 
pthread\+\_\+mutex\+\_\+t \mbox{\hyperlink{sh13_8c_a4acff8232e4aec9cd5c6dc200ac55ef3}{mutex}} = P\+T\+H\+R\+E\+A\+D\+\_\+\+M\+U\+T\+E\+X\+\_\+\+I\+N\+I\+T\+I\+A\+L\+I\+Z\+ER
\item 
char \mbox{\hyperlink{sh13_8c_a50048cd5a966cefe7990602b1d48236d}{gbuffer}} \mbox{[}256\mbox{]}
\item 
char \mbox{\hyperlink{sh13_8c_a22909455f360351a0a4cc8188e36cf0c}{g\+Server\+Ip\+Address}} \mbox{[}256\mbox{]}
\item 
int \mbox{\hyperlink{sh13_8c_a12c0bec8a0fb1e510dfaf591bd01349c}{g\+Server\+Port}}
\item 
char \mbox{\hyperlink{sh13_8c_ac91720708b65911aeb77bb7ebda438f2}{g\+Client\+Ip\+Address}} \mbox{[}256\mbox{]}
\item 
int \mbox{\hyperlink{sh13_8c_ae5b1c45740df6fdc56eec4cdc8cd169e}{g\+Client\+Port}}
\item 
char \mbox{\hyperlink{sh13_8c_afde96eb900d9e7c991d7b48d3c80b20d}{g\+Name}} \mbox{[}256\mbox{]}
\item 
char \mbox{\hyperlink{sh13_8c_a47b35689e3a2c648f1761f1a9cc514b5}{g\+Names}} \mbox{[}4\mbox{]}\mbox{[}256\mbox{]}
\item 
int \mbox{\hyperlink{sh13_8c_a007dd1e55a60f09d2b85af990f9e372d}{g\+Id}}
\item 
int \mbox{\hyperlink{sh13_8c_acc38e9aa67011ce24b4c8a882d068c1d}{joueur\+Sel}}
\item 
int \mbox{\hyperlink{sh13_8c_a86a6b495ecef125da850e79bcd62aba7}{objet\+Sel}}
\item 
int \mbox{\hyperlink{sh13_8c_a45d3ea8306836d64c4faa2084d98f8c7}{guilt\+Sel}}
\item 
int \mbox{\hyperlink{sh13_8c_aa704d8bf7756d37154c6c63c744a3b27}{guilt\+Guess}} \mbox{[}13\mbox{]}
\item 
int \mbox{\hyperlink{sh13_8c_a5136e762f5d03123aca3b44ee5428ae9}{table\+Cartes}} \mbox{[}4\mbox{]}\mbox{[}8\mbox{]}
\item 
int \mbox{\hyperlink{sh13_8c_a3967759bccdcfb06da6822fd26742f73}{b}} \mbox{[}3\mbox{]}
\item 
int \mbox{\hyperlink{sh13_8c_a0f8b74793505a9fb124ee0a2ea9d7e06}{go\+Enabled}}
\item 
int \mbox{\hyperlink{sh13_8c_a0bf9ab38af165134864e46ce2e56d087}{connect\+Enabled}}
\item 
int \mbox{\hyperlink{sh13_8c_a423ed9f606e34244ef0d22d0e8411c71}{chat\+Enable}} = -\/1
\item 
char $\ast$ \mbox{\hyperlink{sh13_8c_aa63407817c0cca8a80fb934277a0b8a0}{nbobjets}} \mbox{[}$\,$\mbox{]} =\{\char`\"{}5\char`\"{},\char`\"{}5\char`\"{},\char`\"{}5\char`\"{},\char`\"{}5\char`\"{},\char`\"{}4\char`\"{},\char`\"{}3\char`\"{},\char`\"{}3\char`\"{},\char`\"{}3\char`\"{}\}
\item 
char $\ast$ \mbox{\hyperlink{sh13_8c_a170deefee6944bfd9474e64879d21284}{nbnoms}} \mbox{[}$\,$\mbox{]}
\item 
volatile int \mbox{\hyperlink{sh13_8c_a8225f160aecfab1365666fd07d1af31c}{synchro}}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
client permettant de se connecter au serveur 

\begin{DoxyAuthor}{Author}
Arthur \& Younes 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.\+1 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
10 mai 2019
\end{DoxyDate}
Le client sh13 permet de se connecter au serveur proposant un autre protocol que H\+T\+TP, pour comprendre comment ce dernier fonctionne. 

\subsection{Function Documentation}
\mbox{\Hypertarget{sh13_8c_a2e05d0dede42b6aeb364340373554df6}\label{sh13_8c_a2e05d0dede42b6aeb364340373554df6}} 
\index{sh13.c@{sh13.c}!fn\_serveur\_tcp@{fn\_serveur\_tcp}}
\index{fn\_serveur\_tcp@{fn\_serveur\_tcp}!sh13.c@{sh13.c}}
\subsubsection{\texorpdfstring{fn\_serveur\_tcp()}{fn\_serveur\_tcp()}}
{\footnotesize\ttfamily void $\ast$ fn\+\_\+serveur\+\_\+tcp (\begin{DoxyParamCaption}\item[{void $\ast$}]{arg }\end{DoxyParamCaption})}



Fonction passée en argument aux thread qui l\textquotesingle{}executera. 


\begin{DoxyParams}{Parameters}
{\em void} & $\ast$arg sont les arguments de la fonction \\
\hline
\end{DoxyParams}
$<$ \mbox{\Hypertarget{sh13_8c_aa6fd4f7eb54362ed558cdaeb5e5bd927}\label{sh13_8c_aa6fd4f7eb54362ed558cdaeb5e5bd927}} 
\index{sh13.c@{sh13.c}!sendMessageToServer@{sendMessageToServer}}
\index{sendMessageToServer@{sendMessageToServer}!sh13.c@{sh13.c}}
\subsubsection{\texorpdfstring{sendMessageToServer()}{sendMessageToServer()}}
{\footnotesize\ttfamily void send\+Message\+To\+Server (\begin{DoxyParamCaption}\item[{char $\ast$}]{ip\+Address,  }\item[{int}]{portno,  }\item[{char $\ast$}]{mess }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em char} & $\ast$ip\+Address est l\textquotesingle{}adresse iP du serveur auquel envoyer le messages \\
\hline
{\em int} & portno est le port à utiliser pour le socket que l\textquotesingle{}on va créer \\
\hline
{\em char} & $\ast$mess est le message à envoyer \\
\hline
\end{DoxyParams}


\subsection{Variable Documentation}
\mbox{\Hypertarget{sh13_8c_a3967759bccdcfb06da6822fd26742f73}\label{sh13_8c_a3967759bccdcfb06da6822fd26742f73}} 
\index{sh13.c@{sh13.c}!b@{b}}
\index{b@{b}!sh13.c@{sh13.c}}
\subsubsection{\texorpdfstring{b}{b}}
{\footnotesize\ttfamily int b\mbox{[}3\mbox{]}}

Stock les 3 cartes ou nom des cartes distribuées par le mélange du serveur \mbox{\Hypertarget{sh13_8c_a423ed9f606e34244ef0d22d0e8411c71}\label{sh13_8c_a423ed9f606e34244ef0d22d0e8411c71}} 
\index{sh13.c@{sh13.c}!chatEnable@{chatEnable}}
\index{chatEnable@{chatEnable}!sh13.c@{sh13.c}}
\subsubsection{\texorpdfstring{chatEnable}{chatEnable}}
{\footnotesize\ttfamily int chat\+Enable = -\/1}

Prototype permettant de gérer le chat \mbox{\Hypertarget{sh13_8c_a0bf9ab38af165134864e46ce2e56d087}\label{sh13_8c_a0bf9ab38af165134864e46ce2e56d087}} 
\index{sh13.c@{sh13.c}!connectEnabled@{connectEnabled}}
\index{connectEnabled@{connectEnabled}!sh13.c@{sh13.c}}
\subsubsection{\texorpdfstring{connectEnabled}{connectEnabled}}
{\footnotesize\ttfamily int connect\+Enabled}

Si le joueur est connecté, il n\textquotesingle{}a plus besoin du bouton connect qui doit donc disparaitre \mbox{\Hypertarget{sh13_8c_a50048cd5a966cefe7990602b1d48236d}\label{sh13_8c_a50048cd5a966cefe7990602b1d48236d}} 
\index{sh13.c@{sh13.c}!gbuffer@{gbuffer}}
\index{gbuffer@{gbuffer}!sh13.c@{sh13.c}}
\subsubsection{\texorpdfstring{gbuffer}{gbuffer}}
{\footnotesize\ttfamily char gbuffer\mbox{[}256\mbox{]}}

Le buffer permet de stocker le message à transmettre au serveur \mbox{\Hypertarget{sh13_8c_ac91720708b65911aeb77bb7ebda438f2}\label{sh13_8c_ac91720708b65911aeb77bb7ebda438f2}} 
\index{sh13.c@{sh13.c}!gClientIpAddress@{gClientIpAddress}}
\index{gClientIpAddress@{gClientIpAddress}!sh13.c@{sh13.c}}
\subsubsection{\texorpdfstring{gClientIpAddress}{gClientIpAddress}}
{\footnotesize\ttfamily char g\+Client\+Ip\+Address\mbox{[}256\mbox{]}}

L\textquotesingle{}IP du client envoyant un message doit être transmise au serveur afin de pouvoir ensuite recevoir des messages\textquotesingle{} \mbox{\Hypertarget{sh13_8c_ae5b1c45740df6fdc56eec4cdc8cd169e}\label{sh13_8c_ae5b1c45740df6fdc56eec4cdc8cd169e}} 
\index{sh13.c@{sh13.c}!gClientPort@{gClientPort}}
\index{gClientPort@{gClientPort}!sh13.c@{sh13.c}}
\subsubsection{\texorpdfstring{gClientPort}{gClientPort}}
{\footnotesize\ttfamily int g\+Client\+Port}

De même le serveur utilise le port du client pour lui transmettre le message à travers le protocole T\+CP \mbox{\Hypertarget{sh13_8c_a007dd1e55a60f09d2b85af990f9e372d}\label{sh13_8c_a007dd1e55a60f09d2b85af990f9e372d}} 
\index{sh13.c@{sh13.c}!gId@{gId}}
\index{gId@{gId}!sh13.c@{sh13.c}}
\subsubsection{\texorpdfstring{gId}{gId}}
{\footnotesize\ttfamily int g\+Id}

ID du client donnée par le serveur selon l\textquotesingle{}ordre d\textquotesingle{}arrivée \mbox{\Hypertarget{sh13_8c_afde96eb900d9e7c991d7b48d3c80b20d}\label{sh13_8c_afde96eb900d9e7c991d7b48d3c80b20d}} 
\index{sh13.c@{sh13.c}!gName@{gName}}
\index{gName@{gName}!sh13.c@{sh13.c}}
\subsubsection{\texorpdfstring{gName}{gName}}
{\footnotesize\ttfamily char g\+Name\mbox{[}256\mbox{]}}

Username ou surnom entrée lors de l\textquotesingle{}inscription sur le serveur \mbox{\Hypertarget{sh13_8c_a47b35689e3a2c648f1761f1a9cc514b5}\label{sh13_8c_a47b35689e3a2c648f1761f1a9cc514b5}} 
\index{sh13.c@{sh13.c}!gNames@{gNames}}
\index{gNames@{gNames}!sh13.c@{sh13.c}}
\subsubsection{\texorpdfstring{gNames}{gNames}}
{\footnotesize\ttfamily char g\+Names\mbox{[}4\mbox{]}\mbox{[}256\mbox{]}}

Tableaux stockant les nomx des autres joueurs ayant aussi rejoint la partie \mbox{\Hypertarget{sh13_8c_a0f8b74793505a9fb124ee0a2ea9d7e06}\label{sh13_8c_a0f8b74793505a9fb124ee0a2ea9d7e06}} 
\index{sh13.c@{sh13.c}!goEnabled@{goEnabled}}
\index{goEnabled@{goEnabled}!sh13.c@{sh13.c}}
\subsubsection{\texorpdfstring{goEnabled}{goEnabled}}
{\footnotesize\ttfamily int go\+Enabled}

Un booléen indiquant si le client possède la main, si c\textquotesingle{}est à lui de jouer le bouton GO s\textquotesingle{}affichera et il pourra effectuer une demande \mbox{\Hypertarget{sh13_8c_a22909455f360351a0a4cc8188e36cf0c}\label{sh13_8c_a22909455f360351a0a4cc8188e36cf0c}} 
\index{sh13.c@{sh13.c}!gServerIpAddress@{gServerIpAddress}}
\index{gServerIpAddress@{gServerIpAddress}!sh13.c@{sh13.c}}
\subsubsection{\texorpdfstring{gServerIpAddress}{gServerIpAddress}}
{\footnotesize\ttfamily char g\+Server\+Ip\+Address\mbox{[}256\mbox{]}}

L\textquotesingle{}adresse IP du srveur entrée lorsque l\textquotesingle{}on lance sh13 est stockée sous la forme de charctère afin de faciliter le transfert \mbox{\Hypertarget{sh13_8c_a12c0bec8a0fb1e510dfaf591bd01349c}\label{sh13_8c_a12c0bec8a0fb1e510dfaf591bd01349c}} 
\index{sh13.c@{sh13.c}!gServerPort@{gServerPort}}
\index{gServerPort@{gServerPort}!sh13.c@{sh13.c}}
\subsubsection{\texorpdfstring{gServerPort}{gServerPort}}
{\footnotesize\ttfamily int g\+Server\+Port}

Le port à utiliser pour le serveur est donné en entrée \mbox{\Hypertarget{sh13_8c_aa704d8bf7756d37154c6c63c744a3b27}\label{sh13_8c_aa704d8bf7756d37154c6c63c744a3b27}} 
\index{sh13.c@{sh13.c}!guiltGuess@{guiltGuess}}
\index{guiltGuess@{guiltGuess}!sh13.c@{sh13.c}}
\subsubsection{\texorpdfstring{guiltGuess}{guiltGuess}}
{\footnotesize\ttfamily int guilt\+Guess\mbox{[}13\mbox{]}}

Stock le nom des coupable pour permettre un affichage où l\textquotesingle{}on peut completer les donnée en éléminant ceux qu\textquotesingle{}on pense innocents \mbox{\Hypertarget{sh13_8c_a45d3ea8306836d64c4faa2084d98f8c7}\label{sh13_8c_a45d3ea8306836d64c4faa2084d98f8c7}} 
\index{sh13.c@{sh13.c}!guiltSel@{guiltSel}}
\index{guiltSel@{guiltSel}!sh13.c@{sh13.c}}
\subsubsection{\texorpdfstring{guiltSel}{guiltSel}}
{\footnotesize\ttfamily int guilt\+Sel}

Coupable séléctionné pour une demande \mbox{\Hypertarget{sh13_8c_acc38e9aa67011ce24b4c8a882d068c1d}\label{sh13_8c_acc38e9aa67011ce24b4c8a882d068c1d}} 
\index{sh13.c@{sh13.c}!joueurSel@{joueurSel}}
\index{joueurSel@{joueurSel}!sh13.c@{sh13.c}}
\subsubsection{\texorpdfstring{joueurSel}{joueurSel}}
{\footnotesize\ttfamily int joueur\+Sel}

Joueur séléctionné pour une demande \mbox{\Hypertarget{sh13_8c_a4acff8232e4aec9cd5c6dc200ac55ef3}\label{sh13_8c_a4acff8232e4aec9cd5c6dc200ac55ef3}} 
\index{sh13.c@{sh13.c}!mutex@{mutex}}
\index{mutex@{mutex}!sh13.c@{sh13.c}}
\subsubsection{\texorpdfstring{mutex}{mutex}}
{\footnotesize\ttfamily pthread\+\_\+mutex\+\_\+t mutex = P\+T\+H\+R\+E\+A\+D\+\_\+\+M\+U\+T\+E\+X\+\_\+\+I\+N\+I\+T\+I\+A\+L\+I\+Z\+ER}

Le mutex permet de proteger l\textquotesingle{}accès au serveur \mbox{\Hypertarget{sh13_8c_a170deefee6944bfd9474e64879d21284}\label{sh13_8c_a170deefee6944bfd9474e64879d21284}} 
\index{sh13.c@{sh13.c}!nbnoms@{nbnoms}}
\index{nbnoms@{nbnoms}!sh13.c@{sh13.c}}
\subsubsection{\texorpdfstring{nbnoms}{nbnoms}}
{\footnotesize\ttfamily char$\ast$ nbnoms\mbox{[}$\,$\mbox{]}}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=\{\textcolor{stringliteral}{"Sebastian Moran"}, \textcolor{stringliteral}{"irene Adler"}, \textcolor{stringliteral}{"inspector Lestrade"},}
\DoxyCodeLine{\textcolor{stringliteral}{"inspector Gregson"}, \textcolor{stringliteral}{"inspector Baynes"}, \textcolor{stringliteral}{"inspector Bradstreet"},}
\DoxyCodeLine{\textcolor{stringliteral}{"inspector Hopkins"}, \textcolor{stringliteral}{"Sherlock Holmes"}, \textcolor{stringliteral}{"John Watson"}, \textcolor{stringliteral}{"Mycroft Holmes"},}
\DoxyCodeLine{\textcolor{stringliteral}{"Mrs. Hudson"}, \textcolor{stringliteral}{"Mary Morstan"}, \textcolor{stringliteral}{"James Moriarty"}\}}

\end{DoxyCode}
Les noms des personnages du jeu sont stockés afin de les afficher, cela agis un peu comme un dictionnaire permttant de faire correspondre des indice entier à ce tableau \mbox{\Hypertarget{sh13_8c_aa63407817c0cca8a80fb934277a0b8a0}\label{sh13_8c_aa63407817c0cca8a80fb934277a0b8a0}} 
\index{sh13.c@{sh13.c}!nbobjets@{nbobjets}}
\index{nbobjets@{nbobjets}!sh13.c@{sh13.c}}
\subsubsection{\texorpdfstring{nbobjets}{nbobjets}}
{\footnotesize\ttfamily char$\ast$ nbobjets\mbox{[}$\,$\mbox{]} =\{\char`\"{}5\char`\"{},\char`\"{}5\char`\"{},\char`\"{}5\char`\"{},\char`\"{}5\char`\"{},\char`\"{}4\char`\"{},\char`\"{}3\char`\"{},\char`\"{}3\char`\"{},\char`\"{}3\char`\"{}\}}

Liste le nombre total de chaque objet par indices par exemple objet\mbox{[}0\mbox{]} = 5 \mbox{\Hypertarget{sh13_8c_a86a6b495ecef125da850e79bcd62aba7}\label{sh13_8c_a86a6b495ecef125da850e79bcd62aba7}} 
\index{sh13.c@{sh13.c}!objetSel@{objetSel}}
\index{objetSel@{objetSel}!sh13.c@{sh13.c}}
\subsubsection{\texorpdfstring{objetSel}{objetSel}}
{\footnotesize\ttfamily int objet\+Sel}

Onjet séléctionné pour une demande \mbox{\Hypertarget{sh13_8c_a8225f160aecfab1365666fd07d1af31c}\label{sh13_8c_a8225f160aecfab1365666fd07d1af31c}} 
\index{sh13.c@{sh13.c}!synchro@{synchro}}
\index{synchro@{synchro}!sh13.c@{sh13.c}}
\subsubsection{\texorpdfstring{synchro}{synchro}}
{\footnotesize\ttfamily volatile int synchro}

La syncro permet d\textquotesingle{}avoir des thread syncronisé, cependant il faut passer au dela du cache \mbox{\Hypertarget{sh13_8c_a5136e762f5d03123aca3b44ee5428ae9}\label{sh13_8c_a5136e762f5d03123aca3b44ee5428ae9}} 
\index{sh13.c@{sh13.c}!tableCartes@{tableCartes}}
\index{tableCartes@{tableCartes}!sh13.c@{sh13.c}}
\subsubsection{\texorpdfstring{tableCartes}{tableCartes}}
{\footnotesize\ttfamily int table\+Cartes\mbox{[}4\mbox{]}\mbox{[}8\mbox{]}}

Stock les données obtenue par les demande ainsi que les objets présents sur les cartes distribuées par le serveur \mbox{\Hypertarget{sh13_8c_a1f65882538200c7d69cdfabe03250dde}\label{sh13_8c_a1f65882538200c7d69cdfabe03250dde}} 
\index{sh13.c@{sh13.c}!thread\_serveur\_tcp\_id@{thread\_serveur\_tcp\_id}}
\index{thread\_serveur\_tcp\_id@{thread\_serveur\_tcp\_id}!sh13.c@{sh13.c}}
\subsubsection{\texorpdfstring{thread\_serveur\_tcp\_id}{thread\_serveur\_tcp\_id}}
{\footnotesize\ttfamily pthread\+\_\+t thread\+\_\+serveur\+\_\+tcp\+\_\+id}

Stock l\textquotesingle{}id du thread correspondant au thread du serveur 